
<!-- Only add variable parts -->

<link rel="stylesheet" href="/css/home.css">
<link rel="stylesheet" href="/css/_friend.css">

<h1> <%= title %></h1>

<div class="home-container">


<section id="feed-posts" >
    <h4>Posts</h4>
    <% if(locals.user) { %>
    <form action="/posts/create" id="new-post-form" method="POST" class="form post-form">
        <textarea name="content"  cols="30" rows="7" placeholder="Type text here...." required></textarea>
        <input type="submit"  value="Post" id="">
    </form>
    <% } %>
    
    <div id="posts-list-container">
        <ul class="flex">
            <% for (post of posts) { %>
                <%- include('_post')  %>
            <% } %>
        </ul>

    </div>
</section>

<section id="user-friends">
    <h3>Friends</h3>
    <ul class="flex" id="friend-list">
        <!-- <img src="" alt="">
        <a href="">QWERTY</a>
        <a href="" class="remove-friend">Remove</a> -->
    </ul>
</section>

<section id="user-list">
    <h3>Users</h3>
    <ul>
        <% for (u of all_users) { %>
            <li>
                <img src="<%= u.avatar %>" alt="<%= u.name %>" width="100"></img>
                <a class="user-list-name" href="/user/profile/<%= u.id  %>"><%= u.name %></a>

                <!-- <button type="submit">Add Friend</button> -->

                <a href="/friends/friendship/request" class="add-friend-btn"><!-- id=<%=u._id%> -->Add Friend</a>
            </li>
        <% } %>
        </ul>
</section>

<%- include('_chat') -%>

</div>
<script src="/js/home_post_comments.js"></script>
<script src="/js/home_post.js"></script>
<script src="js/toggle_likes.js"></script>
<script>
    $('.toggle-like-button').each(function () {
        let self = this;
        let toggleLike = new ToggleLike(self);
    });
</script>

<script src="/js/friend_request.js"></script>
<script>
    $('.add-friend-btn').each(function(){
        let self = this;
        let addFriend = new AddFriend(self);
    });
</script>


 <!-- socket.io link -->
 
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.1/socket.io.js"
    integrity="sha512-Z6C1p1NIexPj5MsVUunW4pg7uMX6/TT3CUVldmjXx2kpip1eZcrAnxIusDxyFIikyM9A61zOVNgvLr/TGudOQg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/js/chat_engine.js"></script>